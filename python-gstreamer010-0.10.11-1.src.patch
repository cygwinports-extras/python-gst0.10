diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x common -x m4 -x po -x autoregen.sh -x stamp-h.in origsrc/gst-python/gst/__init__.py src/gst-python/gst/__init__.py
--- origsrc/gst-python/gst/__init__.py	2007-06-14 09:53:28.000000000 -0500
+++ src/gst-python/gst/__init__.py	2008-04-25 08:11:32.921875000 -0500
@@ -119,40 +119,15 @@
         return float(self.num) / float(self.denom)
 
 
-import sys
-dlsave = sys.getdlopenflags()
+from _gst import *
+import interfaces
 try:
-    from DLFCN import RTLD_GLOBAL, RTLD_LAZY
-except ImportError:
-    RTLD_GLOBAL = -1
-    RTLD_LAZY = -1
-    import os
-    osname = os.uname()[0]
-    if osname == 'Linux' or osname == 'SunOS' or osname == 'FreeBSD':
-        RTLD_GLOBAL = 0x100
-        RTLD_LAZY = 0x1
-    elif osname == 'Darwin':
-        RTLD_GLOBAL = 0x8
-        RTLD_LAZY = 0x1
-    del os
+    import libxml2
 except:
-    RTLD_GLOBAL = -1
-    RTLD_LAZY = -1
-
-if RTLD_GLOBAL != -1 and RTLD_LAZY != -1:
-    sys.setdlopenflags(RTLD_LAZY | RTLD_GLOBAL)
-    from _gst import *
-    import interfaces
-    try:
-        import libxml2
-    except:
-        pass
+    pass
 
 version = get_gst_version
 
-sys.setdlopenflags(dlsave)
-del sys
-
 # Fixes for API cleanups that would cause an API breakage.
 # See #446674
 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x common -x m4 -x po -x autoregen.sh -x stamp-h.in origsrc/gst-python/gst/gst.override src/gst-python/gst/gst.override
--- origsrc/gst-python/gst/gst.override	2008-02-29 06:37:43.000000000 -0600
+++ src/gst-python/gst/gst.override	2008-04-25 08:11:32.921875000 -0500
@@ -584,6 +584,24 @@
     return xml;
  }
 
+#ifdef G_WITH_CYGWIN
+PyObject *
+libxml_xmlDocPtrWrap(xmlDocPtr doc)
+{
+    PyObject *ret;
+
+    if (doc == NULL) {
+        Py_INCREF(Py_None);
+        return (Py_None);
+    }
+    /* TODO: look at deallocation */
+    ret =
+        PyCObject_FromVoidPtrAndDesc((void *) doc, (char *) "xmlDocPtr",
+                                     NULL);
+    return (ret);
+}
+#endif
+
 static int
 _wrap_gst_xml_new(PyGObject *self)
 {
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x common -x m4 -x po -x autoregen.sh -x stamp-h.in origsrc/gst-python/testsuite/Makefile.am src/gst-python/testsuite/Makefile.am
--- origsrc/gst-python/testsuite/Makefile.am	2008-01-01 07:22:21.000000000 -0600
+++ src/gst-python/testsuite/Makefile.am	2008-04-25 08:11:32.937500000 -0500
@@ -8,7 +8,7 @@
 linked_LIBS = testhelper.la
 
 testhelper_la_LDFLAGS = -module -avoid-version
-testhelper_la_LIBADD = $(GLIB_LIBS)
+testhelper_la_LIBADD = $(GST_LIBS)
 testhelper_la_CFLAGS = $(PYGOBJECT_CFLAGS)
 testhelper_la_SOURCES = \
 	testhelpermodule.c \
